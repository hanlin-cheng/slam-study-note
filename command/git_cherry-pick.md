# git cherry-pick

## å‰è¨€

å¯¹äºå¤šåˆ†æ”¯çš„ä»£ç åº“ï¼Œå°†ä»£ç ä»ä¸€ä¸ªåˆ†æ”¯è½¬ç§»åˆ°å¦ä¸€ä¸ªåˆ†æ”¯æ˜¯å¸¸è§éœ€æ±‚ã€‚

è¿™æ—¶åˆ†ä¸¤ç§æƒ…å†µã€‚

ä½ éœ€è¦å¦ä¸€ä¸ªåˆ†æ”¯çš„æ‰€æœ‰ä»£ç å˜åŠ¨ï¼Œé‚£ä¹ˆå°±é‡‡ç”¨åˆå¹¶ï¼ˆgit mergeï¼‰ã€‚
ä½ åªéœ€è¦éƒ¨åˆ†ä»£ç å˜åŠ¨ï¼ˆæŸå‡ ä¸ªæäº¤ï¼‰ï¼Œè¿™æ—¶å¯ä»¥é‡‡ç”¨ Cherry pickã€‚
Cherry pickç›´è¯‘ä¸ºæ¡æ¨±æ¡ƒğŸ’ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯æŠŠå·²ç»å­˜åœ¨çš„commitè¿›è¡ŒæŒ‘é€‰ï¼Œç„¶åé‡æ–°æäº¤ã€‚æ¯”è¾ƒåˆé€‚çš„ä¸€ä¸ªåœºæ™¯æ˜¯æŠŠAåˆ†æ”¯çš„æŸæ¬¡æˆ–è€…å¤šæ¬¡çš„æäº¤ä¹Ÿæäº¤åˆ°Båˆ†æ”¯ä¸Šã€‚

## å›¾ç¤º

æ¯”å¦‚æ­¤æ—¶åˆ†æ”¯æƒ…å†µå¦‚ä¸‹ï¼š

![](media/a7d7fe639765492abea6951ae25170c8.png)

è¿™å¹…å›¾ä¸­ï¼Œæ¯ä¸ªåœ†åœˆä»£è¡¨ä¸€æ¬¡commit

ä¸€æ¡çº¿æ˜¯ä¸€ä¸ªåˆ†æ”¯ã€‚

æ¯”å¦‚c2ï¼Œc3ï¼Œè¿™æ˜¯ä¸¤æ¬¡æäº¤ï¼Œåœ¨åŒä¸€ä¸ªåˆ†æ”¯ä¸Šã€‚

æ­¤æ—¶éœ€æ±‚æ˜¯ï¼šè¦æŠŠç»¿è‰²åˆ†æ”¯çš„C3ï¼Œè“è‰²åˆ†æ”¯çš„C5ï¼Œç´«è‰²åˆ†æ”¯çš„C7åˆåˆ°ä¸€æ¡æ–°çš„åˆ†æ”¯ä¸Šã€‚

æ­¤æ—¶å°±éœ€è¦cherry-pickå‘½ä»¤äº†ã€‚

é¦–å…ˆåˆ‡åˆ°masteråˆ†æ”¯ï¼Œç„¶åè¾“å…¥

git cherry-pick C3 C5 C7

æ­¤æ—¶ï¼Œåˆ†æ”¯å›¾ç¤ºå°±å˜æˆäº†ï¼š
![](media/30f3d615cb354306a900383295ef8166.png)

## ä¸€ã€è½¬ç§»ä¸€ä¸ªæäº¤

1. å…ˆåˆ‡æ¢åˆ° A åˆ†æ”¯

   ```git
   $ git checkout A
   ```

2. æ‰¾åˆ°è¿™æ¬¡æäº¤

   ```
      $ git log
      commit f038d7ffb1685af7d4f870ad0b798670b6f760e8 (HEAD -> feature/0113_update)
      Author: qxj <qxj@qq.com>
      Date:   Thu Jan 14 15:24:54 2021 +0800
      
          feat: xxx
   ```

3. å†åˆ‡æ¢åˆ°Båˆ†æ”¯

   ```
   $ git checkout B
   ```

4. æŠŠ A åˆ†æ”¯ä¸‹çš„è¿™æ¬¡commit é‡æ–°æäº¤åˆ° B åˆ†æ”¯ä¸‹

   ```
   $ git cherry-pick 'f038d7ffb1685af7d4f870ad0b798670b6f760e8'
   ```

å½“æ‰§è¡Œå®Œ `git cherry-pick`ä»¥åï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤ï¼Œè¿™ä¸ªæ–°çš„æäº¤çš„[hash](https://so.csdn.net/so/search?q=hash&spm=1001.2101.3001.7020)å€¼å’ŒåŸæ¥çš„ä¸åŒï¼Œä½†æ ‡å¿—åç§°ä¸€æ ·ã€‚

## äºŒã€è½¬ç§»å¤šä¸ªæäº¤

Cherry pick æ”¯æŒä¸€æ¬¡è½¬ç§»å¤šä¸ªæäº¤ã€‚

```
$ git cherry-pick <HashA> <HashB>
```

ä¸Šé¢çš„å‘½ä»¤å°† A å’Œ B ä¸¤ä¸ªæäº¤åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ã€‚è¿™ä¼šåœ¨å½“å‰åˆ†æ”¯ç”Ÿæˆä¸¤ä¸ªå¯¹åº”çš„æ–°æäº¤ã€‚

å¦‚æœæƒ³è¦è½¬ç§»ä¸€ç³»åˆ—çš„è¿ç»­æäº¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç®€ä¾¿è¯­æ³•ã€‚

```
$ git cherry-pick A..B 
```

å¦‚æœè¦åŒ…å«æäº¤ Aï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ã€‚

```
$ git cherry-pick A^..B 
```

## ä¸‰ã€é…ç½®é¡¹

git cherry-pickå‘½ä»¤çš„å¸¸ç”¨é…ç½®é¡¹å¦‚ä¸‹ã€‚

##### ï¼ˆ1ï¼‰-eï¼Œ--edit

â€‹	æ‰“å¼€å¤–éƒ¨ç¼–è¾‘å™¨ï¼Œç¼–è¾‘æäº¤ä¿¡æ¯ã€‚

##### ï¼ˆ2ï¼‰-nï¼Œ--no-commit

â€‹	åªæ›´æ–°å·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼Œä¸äº§ç”Ÿæ–°çš„æäº¤ã€‚

##### ï¼ˆ3ï¼‰-x

â€‹	åœ¨æäº¤ä¿¡æ¯çš„æœ«å°¾è¿½åŠ ä¸€è¡Œ(cherry picked from commit ...)ï¼Œä¿ç•™åŸæäº¤è€…ä¿¡æ¯ï¼Œæ–¹ä¾¿ä»¥åæŸ¥åˆ°è¿™ä¸ªæäº¤æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚

##### ï¼ˆ4ï¼‰-sï¼Œ--signoff

â€‹	åœ¨æäº¤ä¿¡æ¯çš„æœ«å°¾è¿½åŠ ä¸€è¡Œæ“ä½œè€…çš„ç­¾åï¼Œè¡¨ç¤ºæ˜¯è°è¿›è¡Œäº†è¿™ä¸ªæ“ä½œã€‚

##### ï¼ˆ5ï¼‰-m parent-numberï¼Œ--mainline parent-number

â€‹	å¦‚æœåŸå§‹æäº¤æ˜¯ä¸€ä¸ªåˆå¹¶èŠ‚ç‚¹ï¼Œæ¥è‡ªäºä¸¤ä¸ªåˆ†æ”¯çš„åˆå¹¶ï¼Œé‚£ä¹ˆ Cherry pick é»˜è®¤å°†å¤±è´¥ï¼Œå› ä¸ºå®ƒä¸çŸ¥é“åº”è¯¥é‡‡ç”¨å“ªä¸ªåˆ†æ”¯çš„ä»£ç å˜åŠ¨ã€‚

â€‹	-mé…ç½®é¡¹å‘Šè¯‰ Gitï¼Œåº”è¯¥é‡‡ç”¨å“ªä¸ªåˆ†æ”¯çš„å˜åŠ¨ã€‚å®ƒçš„å‚æ•°parent-numberæ˜¯ä¸€ä¸ªä»1å¼€å§‹çš„æ•´æ•°ï¼Œä»£è¡¨åŸå§‹æäº¤çš„çˆ¶åˆ†æ”¯ç¼–å·ã€‚

```
$ git cherry-pick -m 1 <commitHash>
```

ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼ŒCherry pick é‡‡ç”¨æäº¤commitHashæ¥è‡ªç¼–å·1çš„çˆ¶åˆ†æ”¯çš„å˜åŠ¨ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œ1å·çˆ¶åˆ†æ”¯æ˜¯æ¥å—å˜åŠ¨çš„åˆ†æ”¯ï¼ˆthe branch being merged intoï¼‰ï¼Œ2å·çˆ¶åˆ†æ”¯æ˜¯ä½œä¸ºå˜åŠ¨æ¥æºçš„åˆ†æ”¯ï¼ˆthe branch being merged fromï¼‰ã€‚

## å››ã€ä»£ç å†²çª

å¦‚æœæ“ä½œè¿‡ç¨‹ä¸­å‘ç”Ÿä»£ç å†²çªï¼ŒCherry pick ä¼šåœä¸‹æ¥ï¼Œè®©ç”¨æˆ·å†³å®šå¦‚ä½•ç»§ç»­æ“ä½œã€‚

##### **ï¼ˆ1ï¼‰`--continue`**

ç”¨æˆ·è§£å†³ä»£ç å†²çªåï¼Œç¬¬ä¸€æ­¥å°†ä¿®æ”¹çš„æ–‡ä»¶é‡æ–°åŠ å…¥æš‚å­˜åŒºï¼ˆ`git add .`ï¼‰ï¼Œç¬¬äºŒæ­¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œè®© Cherry pick è¿‡ç¨‹ç»§ç»­æ‰§è¡Œã€‚

```
$ git cherry-pick --continue
```

##### **ï¼ˆ2ï¼‰`--abort`**

å‘ç”Ÿä»£ç å†²çªåï¼Œæ”¾å¼ƒåˆå¹¶ï¼Œå›åˆ°æ“ä½œå‰çš„æ ·å­ã€‚

##### **ï¼ˆ3ï¼‰`--quit`**

å‘ç”Ÿä»£ç å†²çªåï¼Œé€€å‡º Cherry pickï¼Œä½†æ˜¯ä¸å›åˆ°æ“ä½œå‰çš„æ ·å­ã€‚

#### å¦‚æœåœ¨çœŸå®çš„cherry-pick çš„è¿‡ç¨‹ä¸­å‡ºç°äº†å†²çª

```
 Automatic cherry-pick failed.
 After resolving the conflicts,mark the corrected paths with 'git add <paths>' or 'git rm <paths>'and commit the result with:
 git commit -c 15a2b6c61927e5aed6111de89ad9dafba939a90b
 // **æˆ–è€…:**
 error: could not apply f038d7f... dev
 hint: after resolving the conflicts, mark the corrected paths
 hint: with 'git add <paths>' or 'git rm <paths>'
 hint: and commit the result with 'git commit'
```

å°±è·Ÿæ™®é€šçš„å†²çªä¸€æ ·ï¼Œæ‰‹å·¥è§£å†³ã€‚

```
$ git status    # çœ‹å“ªäº›æ–‡ä»¶å‡ºç°å†²çª
$ vim xxx.js  # æ‰‹åŠ¨è§£å†³å®ƒã€‚
$ git add xxx.js
	or
$ git add .			# æ·»åŠ åˆ°ç¼“å­˜åŒº
$ git commit -c <æ–°çš„commitå·ç >
```

ç¬¬äºŒæ­¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œè®© Cherry pick è¿‡ç¨‹ç»§ç»­æ‰§è¡Œã€‚

```
git cherry-pick --continue
```

